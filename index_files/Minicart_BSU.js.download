var setBGOverlayTimeout,LoadMiniCartPaginationEvents,LoadMiniCartDetails,LoadRightNavMouseEvents,AddStringFormatFunc,RightNavMiscFunctions,cartGuid=ReadCookie("CARTCOOKIEUUID"),cartItemCount=0,cartrecords=[],cartGridRecPerPage=5,cartGridPage=1,cartGridTotalPages=0,cartGridVisiblePages=5;$(document).ready(function(){LoadRightNavMouseEvents(),LoadMiniCartDetails(),LoadMiniCartPaginationEvents(),AddStringFormatFunc()}),LoadMiniCartPaginationEvents=function(){$(".cart-pagination").on("focusin","li.active a",function(){RightNavMiscFunctions.openNavItemPopup($(this).closest("li.dropdown"))}),$(document).on("click keydown",".cart-pagination a.page-link",function(t){(t.key==="Enter"||t.type==="click")&&(t.preventDefault(),e($(this)))});function e(e){let t=$(e).attr("id");switch(t){case"cart-page-previous":cartGridPage!==1&&(cartGridPage=cartGridPage-1);break;case"cart-page-next":cartGridPage!==cartGridTotalPages&&(cartGridPage=cartGridPage+1);break;case"cart-page-next-group":cartGridPage%cartGridVisiblePages===0?cartGridPage=cartGridPage+1:cartGridPage=cartGridPage+cartGridVisiblePages-cartGridPage%cartGridVisiblePages+1;break;case"cart-page-previous-group":cartGridPage%cartGridVisiblePages===0?cartGridPage=cartGridPage-cartGridVisiblePages:cartGridPage=cartGridPage-cartGridPage%cartGridVisiblePages;break;default:cartGridPage=parseInt($(e).text())}miniCartGrid.GenerateCartItems(),$(".cart-pagination").find("li.active a").trigger("focus")}},LoadMiniCartDetails=function(){RightNavMiscFunctions.GetMiniCartData(!1)},LoadRightNavMouseEvents=function(){var e=$(".nav-account li.dropdown");e.on({mouseleave:function(e){$(this).has(e.relatedTarget).length===0&&!$(e.target).hasClass("cart-pagination")&&RightNavMiscFunctions.closeNavItemPopup($(this))},mouseover:function(){$(this).closest("li.dropdown").has(document.activeElement).length>0&&RightNavMiscFunctions.openNavItemPopup($(this).closest("li.dropdown"))},keydown:function(e){e.key==="Escape"&&($(this).find("button.dropdown-toggle").trigger("focus"),RightNavMiscFunctions.closeNavItemPopup($(this),e.key))},touchstart:function(e){$(e.target).is("div")&&e.preventDefault()}}),e.on("mouseenter","button.dropdown-toggle",function(e){RightNavMiscFunctions.execRightNavPopupHiddenEvts($(".nav-account li.dropdown.show")),$mobileMenuNew.collapse("hide"),$productMenu.hasClass("show")&&ProductNav.flyoutMouseLeaveEvts(),ProductNav.HideSearchDropdown(),$(".as-results").hide(),RightNavMiscFunctions.openNavItemPopup($(this).closest("li.dropdown"),e.key)}),$("button.account-login, button.account-login-xs, button.minicart").on("click",function(){typeof setBGOverlayTimeout!="undefined"&&clearTimeout(setBGOverlayTimeout),$(this).closest("li.dropdown.show").length>0?RemoveBGOverlay():AddBGOverlay()}),$("button.minicart").on("keydown",function(e){(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),e.stopPropagation(),typeof setBGOverlayTimeout!="undefined"&&clearTimeout(setBGOverlayTimeout),$(this).closest("li.dropdown.show").length>0?(RightNavMiscFunctions.closeNavItemPopup($(this.closest("li.dropdown"),e.key)),RemoveBGOverlay()):(RightNavMiscFunctions.openNavItemPopup($(this).closest("li.dropdown"),e.key),AddBGOverlay()))}),$(".nav-account, button.minicart").on("focusout","li.dropdown",function(e){$(e.currentTarget).is("li.dropdown")&&e.relatedTarget!=null&&$(this).has(e.relatedTarget).length===0&&RightNavMiscFunctions.closeNavItemPopup($(e.currentTarget))}),$(".nav-account li.dropdown button.dropdown-toggle").on("touchstart",function(e){($(this).is("button.dropdown-toggle.account-login-xs")||$(this).is("button.dropdown-toggle.account-login")||$(this).is("button.dropdown-toggle.minicart"))&&(e.preventDefault(),e.stopPropagation(),$(this).closest("li.dropdown.show").length>0?RightNavMiscFunctions.closeNavItemPopup($(this.closest("li.dropdown")),e.key):(RightNavMiscFunctions.openNavItemPopup($(this).closest("li.dropdown"),e.key),$(this).trigger("focus")))}),$("#linkToCartAtMiniCart").on("keydown",function(e){e.key==="Tab"&&!e.shiftKey&&RightNavMiscFunctions.closeNavItemPopup($(this.closest("li.dropdown")),e.key)})},AddStringFormatFunc=function(){String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,n){return typeof e[n]!="undefined"?e[n]:t})})},RightNavMiscFunctions={openNavItemPopup:function(e,t="undefined"){typeof setBGOverlayTimeout!="undefined"&&clearTimeout(setBGOverlayTimeout),t==="undefined"?setBGOverlayTimeout=setTimeout(function(){n()},navFadeOutSpeed):n();function n(){e.hasClass("show")||(e.hasClass("minicart-element")&&RightNavMiscFunctions.ResetCartGrid(),ProductNavMobl.closeMobileMenuExplict(),AddBGOverlay(),RightNavMiscFunctions.execRightNavPopupShowEvts(e))}},closeNavItemPopup:function(e,t="undefined"){typeof setBGOverlayTimeout!="undefined"&&clearTimeout(setBGOverlayTimeout),t==="undefined"?setBGOverlayTimeout=setTimeout(function(){n()},navFadeOutSpeed):n(),RemoveBGOverlay();function n(){e.hasClass("show")&&RightNavMiscFunctions.execRightNavPopupHiddenEvts(e)}},execRightNavPopupShowEvts:function(e){e.addClass("show"),e.find(".dropdown-menu").addClass("show"),e.find("button.dropdown-toggle").attr("aria-expanded","true")},execRightNavPopupHiddenEvts:function(e){e.removeClass("show"),e.find(".dropdown-menu").removeClass("show"),e.find("button.dropdown-toggle").attr("aria-expanded","false")},SetGAEvent:function(e,t){cartItemCount===0&&(t="Empty View Cart"),GaEvent(e,"View Cart",t)},GetMiniCartData:function(e){let t=typeof isGSTValidated==="undefined"?"false":isGSTValidated;var n="/api/Cart/GetCart?cartGuid="+encodeURIComponent(cartGuid)+"&includeItems=true&countryCode="+currentCountryCode+"&currencyCode="+currentCurrencyCode+"&currencyCultureCode="+currencyCulture+"&uiCultureCode="+cultureCode+"&fromCart="+e+"&senderCode="+senderCode+"&isGSTValidated="+t;$.getJSON(n,function(e){var i,n=$(".minicart-count"),t=$("#cartLabel"),s=$("#miniCarthypLink"),o=$(".minicart-xs");cartItemCount=e.ItemCount,cartrecords=e.Items,cartItemCount>0?($("#msgErrorBox").text(""),i=miniCartResources.CartSubTotal,$("[id$=lblCartTotalAmount]").text(i+": "+e.CartTotal),e.CartHassErrorItem===!0&&$("[id$=lblCartErorMsg]").addClass("miniCartError"),cartItemCount>99?(n.html("99+"),s.attr("aria-label",t.val().replace("{0}","99+")),o.attr("aria-label",t.val().replace("{0}","99+"))):(n.html(cartItemCount),s.attr("aria-label",t.val().replace("{0}",cartItemCount)),o.attr("aria-label",t.val().replace("{0}",cartItemCount))),cartGridTotalPages=Math.ceil(cartItemCount/cartGridRecPerPage),miniCartGrid.GenerateCartItems()):($("[id$=lblCartTotalAmount]").hide(),n.html("0"),s.attr("aria-label",t.val().replace("{0}",0)),o.attr("aria-label",t.val().replace("{0}",0)),$("#msgErrorBox").text(miniCartResources.YourCartIsEmpty))})},ResetCartGrid:function(){cartGridPage!=1&&(cartGridPage=1,miniCartGrid.GenerateCartItems())},EmptyCartGrid:function(){$("[id$=lblCartTotalAmount]").hide(),$("#cartBody").hide(),$(".cart-pagination").hide(),$(".fa-exclamation-circle").hide(),$(".text-warning").hide(),$(".minicart-count").html("0"),$("#miniCarthypLink").attr("aria-label",$("#cartLabel").val().replace("{0}",0)),$(".minicart-xs").attr("aria-label",$("#cartLabel").val().replace("{0}",0)),$("#msgErrorBox").text(miniCartResources.YourCartIsEmpty)}}